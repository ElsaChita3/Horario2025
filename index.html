<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Horario UDD Final</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .mod-slot {
      border: 1px solid #ccc;
      height: 50px;
      text-align: center;
      font-size: 0.65rem;
      white-space: pre-line;
      line-height: 1.2;
    }
    .selected {
      font-weight: bold;
    }
  </style>
</head>
<body class="bg-gray-50 p-4">
  <h1 class="text-xl font-bold mb-4">üóìÔ∏è Planificador Visual por M√≥dulos</h1>
  <div class="flex gap-4">
    <div class="w-1/3 overflow-y-auto max-h-[85vh]">
      <div id="courseContainer" class="space-y-4"></div>
    </div>
    <div class="w-2/3">
      <table class="table-auto border-collapse w-full text-xs">
        <thead>
          <tr>
            <th class="w-24">M√≥dulo</th>
            <th>Lunes</th><th>Martes</th><th>Mi√©rcoles</th><th>Jueves</th><th>Viernes</th>
          </tr>
        </thead>
        <tbody>
          <tr><td class='font-bold text-center'>M√≥dulo 1 <br><span class='text-xs'>08:30-09:40</span></td><td class='mod-slot' data-slot='Lunes-M√≥dulo 1'></td><td class='mod-slot' data-slot='Martes-M√≥dulo 1'></td><td class='mod-slot' data-slot='Mi√©rcoles-M√≥dulo 1'></td><td class='mod-slot' data-slot='Jueves-M√≥dulo 1'></td><td class='mod-slot' data-slot='Viernes-M√≥dulo 1'></td></tr><tr><td class='font-bold text-center'>M√≥dulo 2 <br><span class='text-xs'>09:50-11:00</span></td><td class='mod-slot' data-slot='Lunes-M√≥dulo 2'></td><td class='mod-slot' data-slot='Martes-M√≥dulo 2'></td><td class='mod-slot' data-slot='Mi√©rcoles-M√≥dulo 2'></td><td class='mod-slot' data-slot='Jueves-M√≥dulo 2'></td><td class='mod-slot' data-slot='Viernes-M√≥dulo 2'></td></tr><tr><td class='font-bold text-center'>M√≥dulo 3 <br><span class='text-xs'>11:10-12:20</span></td><td class='mod-slot' data-slot='Lunes-M√≥dulo 3'></td><td class='mod-slot' data-slot='Martes-M√≥dulo 3'></td><td class='mod-slot' data-slot='Mi√©rcoles-M√≥dulo 3'></td><td class='mod-slot' data-slot='Jueves-M√≥dulo 3'></td><td class='mod-slot' data-slot='Viernes-M√≥dulo 3'></td></tr><tr><td class='font-bold text-center'>M√≥dulo 4 <br><span class='text-xs'>12:30-13:40</span></td><td class='mod-slot' data-slot='Lunes-M√≥dulo 4'></td><td class='mod-slot' data-slot='Martes-M√≥dulo 4'></td><td class='mod-slot' data-slot='Mi√©rcoles-M√≥dulo 4'></td><td class='mod-slot' data-slot='Jueves-M√≥dulo 4'></td><td class='mod-slot' data-slot='Viernes-M√≥dulo 4'></td></tr><tr><td class='font-bold text-center'>M√≥dulo 5 <br><span class='text-xs'>13:50-15:00</span></td><td class='mod-slot' data-slot='Lunes-M√≥dulo 5'></td><td class='mod-slot' data-slot='Martes-M√≥dulo 5'></td><td class='mod-slot' data-slot='Mi√©rcoles-M√≥dulo 5'></td><td class='mod-slot' data-slot='Jueves-M√≥dulo 5'></td><td class='mod-slot' data-slot='Viernes-M√≥dulo 5'></td></tr><tr><td class='font-bold text-center'>M√≥dulo 6 <br><span class='text-xs'>15:10-16:20</span></td><td class='mod-slot' data-slot='Lunes-M√≥dulo 6'></td><td class='mod-slot' data-slot='Martes-M√≥dulo 6'></td><td class='mod-slot' data-slot='Mi√©rcoles-M√≥dulo 6'></td><td class='mod-slot' data-slot='Jueves-M√≥dulo 6'></td><td class='mod-slot' data-slot='Viernes-M√≥dulo 6'></td></tr><tr><td class='font-bold text-center'>M√≥dulo 7 <br><span class='text-xs'>16:30-17:40</span></td><td class='mod-slot' data-slot='Lunes-M√≥dulo 7'></td><td class='mod-slot' data-slot='Martes-M√≥dulo 7'></td><td class='mod-slot' data-slot='Mi√©rcoles-M√≥dulo 7'></td><td class='mod-slot' data-slot='Jueves-M√≥dulo 7'></td><td class='mod-slot' data-slot='Viernes-M√≥dulo 7'></td></tr><tr><td class='font-bold text-center'>M√≥dulo 8 <br><span class='text-xs'>17:50-19:00</span></td><td class='mod-slot' data-slot='Lunes-M√≥dulo 8'></td><td class='mod-slot' data-slot='Martes-M√≥dulo 8'></td><td class='mod-slot' data-slot='Mi√©rcoles-M√≥dulo 8'></td><td class='mod-slot' data-slot='Jueves-M√≥dulo 8'></td><td class='mod-slot' data-slot='Viernes-M√≥dulo 8'></td></tr><tr><td class='font-bold text-center'>M√≥dulo 9 <br><span class='text-xs'>19:10-20:20</span></td><td class='mod-slot' data-slot='Lunes-M√≥dulo 9'></td><td class='mod-slot' data-slot='Martes-M√≥dulo 9'></td><td class='mod-slot' data-slot='Mi√©rcoles-M√≥dulo 9'></td><td class='mod-slot' data-slot='Jueves-M√≥dulo 9'></td><td class='mod-slot' data-slot='Viernes-M√≥dulo 9'></td></tr>
        </tbody>
      </table>
    </div>
  </div>

<script>
const sectionData = [{"ramo": "PLANIFICACI√ìN ESTRATEGICA", "seccion": 1, "profesor": "A. Sprovera", "bloques": [{"D√≠a": "Lunes", "M√≥dulo": "MODULO 2"}, {"D√≠a": "Lunes", "M√≥dulo": "MODULO 3"}], "label": "PLANIFICACI√ìN ESTRATEGICA (I)\\nA. Sprovera", "color": "#F8BBD0"}, {"ramo": "PLANIFICACI√ìN ESTRATEGICA", "seccion": 2, "profesor": "A. Sprovera", "bloques": [{"D√≠a": "Miercoles", "M√≥dulo": "MODULO 1"}, {"D√≠a": "Miercoles", "M√≥dulo": "MODULO 2"}], "label": "PLANIFICACI√ìN ESTRATEGICA (II)\\nA. Sprovera", "color": "#F8BBD0"}, {"ramo": "PLANIFICACI√ìN ESTRATEGICA", "seccion": 3, "profesor": "Y. Gallardo", "bloques": [{"D√≠a": "Miercoles", "M√≥dulo": "MODULO 4"}, {"D√≠a": "Miercoles", "M√≥dulo": "MODULO 5"}], "label": "PLANIFICACI√ìN ESTRATEGICA (III)\\nY. Gallardo", "color": "#F8BBD0"}, {"ramo": "CREATIVITY LAB", "seccion": 1, "profesor": "F. Valdivia", "bloques": [{"D√≠a": "Jueves", "M√≥dulo": "MODULO 1"}, {"D√≠a": "Jueves", "M√≥dulo": "MODULO 2"}], "label": "CREATIVITY LAB (I)\\nF. Valdivia", "color": "#D1C4E9"}, {"ramo": "CREATIVITY LAB", "seccion": 2, "profesor": "F. Valdivia", "bloques": [{"D√≠a": "Jueves", "M√≥dulo": "MODULO 3"}, {"D√≠a": "Jueves", "M√≥dulo": "MODULO 4"}], "label": "CREATIVITY LAB (II)\\nF. Valdivia", "color": "#D1C4E9"}, {"ramo": "CREATIVITY LAB", "seccion": 3, "profesor": "P. Aguirre", "bloques": [{"D√≠a": "Lunes", "M√≥dulo": "MODULO 6"}, {"D√≠a": "Lunes", "M√≥dulo": "MODULO 7"}], "label": "CREATIVITY LAB (III)\\nP. Aguirre", "color": "#D1C4E9"}, {"ramo": "CREATIVITY LAB", "seccion": 4, "profesor": "P. Aguirre", "bloques": [{"D√≠a": "Miercoles", "M√≥dulo": "MODULO 6"}, {"D√≠a": "Miercoles", "M√≥dulo": "MODULO 7"}], "label": "CREATIVITY LAB (IV)\\nP. Aguirre", "color": "#D1C4E9"}, {"ramo": "DATOS PARA TOMAR DECISIONES (online)", "seccion": 1, "profesor": "JP. Salcedo", "bloques": [{"D√≠a": "Lunes", "M√≥dulo": "MODULO 8"}], "label": "DATOS PARA TOMAR DECISIONES (online) (I)\\nJP. Salcedo", "color": "#FFF9C4"}, {"ramo": "DATOS PARA TOMAR DECISIONES (online)", "seccion": 2, "profesor": "JP. Salcedo", "bloques": [{"D√≠a": "Jueves", "M√≥dulo": "MODULO 8"}], "label": "DATOS PARA TOMAR DECISIONES (online) (II)\\nJP. Salcedo", "color": "#FFF9C4"}, {"ramo": "DATOS PARA TOMAR DECISIONES (B-Learning)", "seccion": 3, "profesor": "G. Assad", "bloques": [{"D√≠a": "Martes", "M√≥dulo": "MODULO 5"}, {"D√≠a": "Martes", "M√≥dulo": "MODULO 6"}], "label": "DATOS PARA TOMAR DECISIONES (B-Learning) (III)\\nG. Assad", "color": "#C8E6C9"}, {"ramo": "DATOS PARA TOMAR DECISIONES (B-Learning)", "seccion": 4, "profesor": "G. Assad", "bloques": [{"D√≠a": "Martes", "M√≥dulo": "MODULO 7"}, {"D√≠a": "Martes", "M√≥dulo": "MODULO 8"}], "label": "DATOS PARA TOMAR DECISIONES (B-Learning) (IV)\\nG. Assad", "color": "#C8E6C9"}, {"ramo": "INNOVATION AND SEED CAPITAL (online)", "seccion": 1, "profesor": "A. Cabezas", "bloques": [{"D√≠a": "Viernes", "M√≥dulo": "MODULO 1"}, {"D√≠a": "Viernes", "M√≥dulo": "MODULO 2"}], "label": "INNOVATION AND SEED CAPITAL (online) (I)\\nA. Cabezas", "color": "#B2EBF2"}, {"ramo": "INNOVATION AND SEED CAPITAL (online)", "seccion": 2, "profesor": "L. Gougain", "bloques": [{"D√≠a": "Martes", "M√≥dulo": "MODULO 3"}, {"D√≠a": "Martes", "M√≥dulo": "MODULO 4"}], "label": "INNOVATION AND SEED CAPITAL (online) (II)\\nL. Gougain", "color": "#B2EBF2"}, {"ramo": "INNOVATION AND SEED CAPITAL (online)", "seccion": 3, "profesor": "L. Gougain", "bloques": [{"D√≠a": "Viernes", "M√≥dulo": "MODULO 5"}, {"D√≠a": "Viernes", "M√≥dulo": "MODULO 6"}], "label": "INNOVATION AND SEED CAPITAL (online) (III)\\nL. Gougain", "color": "#B2EBF2"}, {"ramo": "TALLER VI", "seccion": 1, "profesor": "Patricio Aguirre", "bloques": [{"D√≠a": "Lunes", "M√≥dulo": "MODULO 9"}], "label": "TALLER VI (I)\\nPatricio Aguirre", "color": "#FFECB3"}, {"ramo": "TALLER VI", "seccion": 1, "profesor": "Jaime G√≥mez", "bloques": [{"D√≠a": "Miercoles", "M√≥dulo": "MODULO 9"}], "label": "TALLER VI (I)\\nJaime G√≥mez", "color": "#FFECB3"}, {"ramo": "TALLER VI", "seccion": 2, "profesor": "Simon Bustamante", "bloques": [{"D√≠a": "Martes", "M√≥dulo": "MODULO 1"}, {"D√≠a": "Martes", "M√≥dulo": "MODULO 2"}], "label": "TALLER VI (II)\\nSimon Bustamante", "color": "#FFECB3"}, {"ramo": "TALLER VI", "seccion": 2, "profesor": "Diego Perry", "bloques": [{"D√≠a": "Viernes", "M√≥dulo": "MODULO 1"}, {"D√≠a": "Viernes", "M√≥dulo": "MODULO 2"}], "label": "TALLER VI (II)\\nDiego Perry", "color": "#FFECB3"}, {"ramo": "TALLER VI", "seccion": 3, "profesor": "Paulina Diaz", "bloques": [{"D√≠a": "Lunes", "M√≥dulo": "MODULO 4"}, {"D√≠a": "Lunes", "M√≥dulo": "MODULO 5"}], "label": "TALLER VI (III)\\nPaulina Diaz", "color": "#FFECB3"}, {"ramo": "TALLER VI", "seccion": 3, "profesor": "Juan Valdivia", "bloques": [{"D√≠a": "Jueves", "M√≥dulo": "MODULO 1"}, {"D√≠a": "Jueves", "M√≥dulo": "MODULO 2"}], "label": "TALLER VI (III)\\nJuan Valdivia", "color": "#FFECB3"}];

function toggleSection(id, bloques, li, color, label) {
  const active = li.classList.contains("bg-green-100");
  let conflict = false;

  bloques.forEach(b => {
    const cell = document.querySelector(`[data-slot="${b.D√≠a}-${b.M√≥dulo}"]`);
    if (cell && !active && cell.classList.contains("selected") && cell.dataset.section !== id) {
      conflict = true;
    }
  });

  if (conflict) {
    alert("Conflicto de horario");
    return;
  }

  bloques.forEach(b => {
    const cell = document.querySelector(`[data-slot="${b.D√≠a}-${b.M√≥dulo}"]`);
    if (!cell) return;
    if (active && cell.dataset.section === id) {
      cell.classList.remove("selected");
      cell.textContent = "";
      cell.style.backgroundColor = "";
      delete cell.dataset.section;
    } else if (!active) {
      cell.classList.add("selected");
      cell.innerText = label.replaceAll("\\n", "\n");
      cell.style.backgroundColor = color;
      cell.dataset.section = id;
    }
  });

  li.classList.toggle("bg-green-100");
}

function buildList() {
  const byRamo = {};
  sectionData.forEach(sec => {
    const key = `${sec.ramo}|${sec.seccion}|${sec.profesor}`;
    if (!byRamo[sec.ramo]) byRamo[sec.ramo] = [];
    byRamo[sec.ramo].push([key, sec]);
  });

  const container = document.getElementById("courseContainer");

  Object.entries(byRamo).forEach(([ramo, secciones]) => {
    const wrapper = document.createElement("div");
    const header = document.createElement("button");
    header.textContent = "üìò " + ramo;
    header.className = "w-full text-left font-bold text-blue-700 hover:underline";
    const list = document.createElement("ul");
    list.className = "ml-4 mt-2 hidden space-y-1";

    secciones.forEach(([key, sec]) => {
      const li = document.createElement("li");
      li.textContent = `${sec.seccion} | ${sec.label.replaceAll("\\n", " ")}`;
      li.className = "cursor-pointer hover:bg-blue-100 border rounded p-2";
      li.onclick = () => toggleSection(key, sec.bloques, li, sec.color, sec.label);
      list.appendChild(li);
    });

    header.onclick = () => list.classList.toggle("hidden");
    wrapper.appendChild(header);
    wrapper.appendChild(list);
    container.appendChild(wrapper);
  });
}

buildList();
</script>

</body>
</html>