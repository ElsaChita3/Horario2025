<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Horario UDD Final</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .mod-slot {
      border: 1px solid #ccc;
      height: 50px;
      text-align: center;
      font-size: 0.65rem;
      white-space: pre-line;
      line-height: 1.2;
    }
    .selected {
      font-weight: bold;
    }
  </style>
</head>
<body class="bg-gray-50 p-4">
  <h1 class="text-xl font-bold mb-4">üóìÔ∏è Planificador Visual por M√≥dulos</h1>
  <div class="flex gap-4">
    <div class="w-1/3 overflow-y-auto max-h-[85vh]">
      <div id="courseContainer" class="space-y-4"></div>
    </div>
    <div class="w-2/3">
      <table class="table-auto border-collapse w-full text-xs">
        <thead>
          <tr>
            <th class="w-24">M√≥dulo</th>
            <th>Lunes</th><th>Martes</th><th>Mi√©rcoles</th><th>Jueves</th><th>Viernes</th>
          </tr>
        </thead>
        <tbody>
          <tr><td class='font-bold text-center'>M√≥dulo 1 <br><span class='text-xs'>08:30-09:40</span></td><td class='mod-slot' data-slot='Lunes-M√≥dulo 1'></td><td class='mod-slot' data-slot='Martes-M√≥dulo 1'></td><td class='mod-slot' data-slot='Mi√©rcoles-M√≥dulo 1'></td><td class='mod-slot' data-slot='Jueves-M√≥dulo 1'></td><td class='mod-slot' data-slot='Viernes-M√≥dulo 1'></td></tr><tr><td class='font-bold text-center'>M√≥dulo 2 <br><span class='text-xs'>09:50-11:00</span></td><td class='mod-slot' data-slot='Lunes-M√≥dulo 2'></td><td class='mod-slot' data-slot='Martes-M√≥dulo 2'></td><td class='mod-slot' data-slot='Mi√©rcoles-M√≥dulo 2'></td><td class='mod-slot' data-slot='Jueves-M√≥dulo 2'></td><td class='mod-slot' data-slot='Viernes-M√≥dulo 2'></td></tr><tr><td class='font-bold text-center'>M√≥dulo 3 <br><span class='text-xs'>11:10-12:20</span></td><td class='mod-slot' data-slot='Lunes-M√≥dulo 3'></td><td class='mod-slot' data-slot='Martes-M√≥dulo 3'></td><td class='mod-slot' data-slot='Mi√©rcoles-M√≥dulo 3'></td><td class='mod-slot' data-slot='Jueves-M√≥dulo 3'></td><td class='mod-slot' data-slot='Viernes-M√≥dulo 3'></td></tr><tr><td class='font-bold text-center'>M√≥dulo 4 <br><span class='text-xs'>12:30-13:40</span></td><td class='mod-slot' data-slot='Lunes-M√≥dulo 4'></td><td class='mod-slot' data-slot='Martes-M√≥dulo 4'></td><td class='mod-slot' data-slot='Mi√©rcoles-M√≥dulo 4'></td><td class='mod-slot' data-slot='Jueves-M√≥dulo 4'></td><td class='mod-slot' data-slot='Viernes-M√≥dulo 4'></td></tr><tr><td class='font-bold text-center'>M√≥dulo 5 <br><span class='text-xs'>13:50-15:00</span></td><td class='mod-slot' data-slot='Lunes-M√≥dulo 5'></td><td class='mod-slot' data-slot='Martes-M√≥dulo 5'></td><td class='mod-slot' data-slot='Mi√©rcoles-M√≥dulo 5'></td><td class='mod-slot' data-slot='Jueves-M√≥dulo 5'></td><td class='mod-slot' data-slot='Viernes-M√≥dulo 5'></td></tr><tr><td class='font-bold text-center'>M√≥dulo 6 <br><span class='text-xs'>15:10-16:20</span></td><td class='mod-slot' data-slot='Lunes-M√≥dulo 6'></td><td class='mod-slot' data-slot='Martes-M√≥dulo 6'></td><td class='mod-slot' data-slot='Mi√©rcoles-M√≥dulo 6'></td><td class='mod-slot' data-slot='Jueves-M√≥dulo 6'></td><td class='mod-slot' data-slot='Viernes-M√≥dulo 6'></td></tr><tr><td class='font-bold text-center'>M√≥dulo 7 <br><span class='text-xs'>16:30-17:40</span></td><td class='mod-slot' data-slot='Lunes-M√≥dulo 7'></td><td class='mod-slot' data-slot='Martes-M√≥dulo 7'></td><td class='mod-slot' data-slot='Mi√©rcoles-M√≥dulo 7'></td><td class='mod-slot' data-slot='Jueves-M√≥dulo 7'></td><td class='mod-slot' data-slot='Viernes-M√≥dulo 7'></td></tr><tr><td class='font-bold text-center'>M√≥dulo 8 <br><span class='text-xs'>17:50-19:00</span></td><td class='mod-slot' data-slot='Lunes-M√≥dulo 8'></td><td class='mod-slot' data-slot='Martes-M√≥dulo 8'></td><td class='mod-slot' data-slot='Mi√©rcoles-M√≥dulo 8'></td><td class='mod-slot' data-slot='Jueves-M√≥dulo 8'></td><td class='mod-slot' data-slot='Viernes-M√≥dulo 8'></td></tr><tr><td class='font-bold text-center'>M√≥dulo 9 <br><span class='text-xs'>19:10-20:20</span></td><td class='mod-slot' data-slot='Lunes-M√≥dulo 9'></td><td class='mod-slot' data-slot='Martes-M√≥dulo 9'></td><td class='mod-slot' data-slot='Mi√©rcoles-M√≥dulo 9'></td><td class='mod-slot' data-slot='Jueves-M√≥dulo 9'></td><td class='mod-slot' data-slot='Viernes-M√≥dulo 9'></td></tr>
        </tbody>
      </table>
    </div>
  </div>

<script>
const data = `PLANIFICACI√ìN ESTRATEGICA,1,A. Sprovera,Lunes,M√≥dulo 2,PLANIFICACI√ìN ESTRATEGICA (I) - A. Sprovera,#F8BBD0
PLANIFICACI√ìN ESTRATEGICA,1,A. Sprovera,Lunes,M√≥dulo 3,PLANIFICACI√ìN ESTRATEGICA (I) - A. Sprovera,#F8BBD0
PLANIFICACI√ìN ESTRATEGICA,2,A. Sprovera,Miercoles,M√≥dulo 1,PLANIFICACI√ìN ESTRATEGICA (II) - A. Sprovera,#F8BBD0
PLANIFICACI√ìN ESTRATEGICA,2,A. Sprovera,Miercoles,M√≥dulo 2,PLANIFICACI√ìN ESTRATEGICA (II) - A. Sprovera,#F8BBD0
PLANIFICACI√ìN ESTRATEGICA,3,Y. Gallardo,Miercoles,M√≥dulo 4,PLANIFICACI√ìN ESTRATEGICA (III) - Y. Gallardo,#F8BBD0
PLANIFICACI√ìN ESTRATEGICA,3,Y. Gallardo,Miercoles,M√≥dulo 5,PLANIFICACI√ìN ESTRATEGICA (III) - Y. Gallardo,#F8BBD0
CREATIVITY LAB,1,F. Valdivia,Jueves,M√≥dulo 1,CREATIVITY LAB (I) - F. Valdivia,#D1C4E9
CREATIVITY LAB,1,F. Valdivia,Jueves,M√≥dulo 2,CREATIVITY LAB (I) - F. Valdivia,#D1C4E9
CREATIVITY LAB,2,F. Valdivia,Jueves,M√≥dulo 3,CREATIVITY LAB (II) - F. Valdivia,#D1C4E9
CREATIVITY LAB,2,F. Valdivia,Jueves,M√≥dulo 4,CREATIVITY LAB (II) - F. Valdivia,#D1C4E9
CREATIVITY LAB,3,P. Aguirre,Lunes,M√≥dulo 6,CREATIVITY LAB (III) - P. Aguirre,#D1C4E9
CREATIVITY LAB,3,P. Aguirre,Lunes,M√≥dulo 7,CREATIVITY LAB (III) - P. Aguirre,#D1C4E9
CREATIVITY LAB,4,P. Aguirre,Miercoles,M√≥dulo 6,CREATIVITY LAB (IV) - P. Aguirre,#D1C4E9
CREATIVITY LAB,4,P. Aguirre,Miercoles,M√≥dulo 7,CREATIVITY LAB (IV) - P. Aguirre,#D1C4E9
DATOS PARA TOMAR DECISIONES (online),1,JP. Salcedo,Lunes,M√≥dulo 8,DATOS PARA TOMAR DECISIONES (online) (I) - JP. Salcedo,#FFF9C4
DATOS PARA TOMAR DECISIONES (online),2,JP. Salcedo,Jueves,M√≥dulo 8,DATOS PARA TOMAR DECISIONES (online) (II) - JP. Salcedo,#FFF9C4
DATOS PARA TOMAR DECISIONES (B-Learning),3,G. Assad,Martes,M√≥dulo 5,DATOS PARA TOMAR DECISIONES (B-Learning) (III) - G. Assad,#C8E6C9
DATOS PARA TOMAR DECISIONES (B-Learning),3,G. Assad,Martes,M√≥dulo 6,DATOS PARA TOMAR DECISIONES (B-Learning) (III) - G. Assad,#C8E6C9
DATOS PARA TOMAR DECISIONES (B-Learning),4,G. Assad,Martes,M√≥dulo 7,DATOS PARA TOMAR DECISIONES (B-Learning) (IV) - G. Assad,#C8E6C9
DATOS PARA TOMAR DECISIONES (B-Learning),4,G. Assad,Martes,M√≥dulo 8,DATOS PARA TOMAR DECISIONES (B-Learning) (IV) - G. Assad,#C8E6C9
INNOVATION AND SEED CAPITAL (online),1,A. Cabezas,Viernes,M√≥dulo 1,INNOVATION AND SEED CAPITAL (online) (I) - A. Cabezas,#B2EBF2
INNOVATION AND SEED CAPITAL (online),1,A. Cabezas,Viernes,M√≥dulo 2,INNOVATION AND SEED CAPITAL (online) (I) - A. Cabezas,#B2EBF2
INNOVATION AND SEED CAPITAL (online),2,L. Gougain,Martes,M√≥dulo 3,INNOVATION AND SEED CAPITAL (online) (II) - L. Gougain,#B2EBF2
INNOVATION AND SEED CAPITAL (online),2,L. Gougain,Martes,M√≥dulo 4,INNOVATION AND SEED CAPITAL (online) (II) - L. Gougain,#B2EBF2
INNOVATION AND SEED CAPITAL (online),3,L. Gougain,Viernes,M√≥dulo 5,INNOVATION AND SEED CAPITAL (online) (III) - L. Gougain,#B2EBF2
INNOVATION AND SEED CAPITAL (online),3,L. Gougain,Viernes,M√≥dulo 6,INNOVATION AND SEED CAPITAL (online) (III) - L. Gougain,#B2EBF2
TALLER VI,1,Patricio Aguirre,Lunes,M√≥dulo 9,TALLER VI (I) - Patricio Aguirre,#FFECB3
TALLER VI,1,Jaime G√≥mez,Miercoles,M√≥dulo 9,TALLER VI (I) - Jaime G√≥mez,#FFECB3
TALLER VI,2,Simon Bustamante,Martes,M√≥dulo 1,TALLER VI (II) - Simon Bustamante,#FFECB3
TALLER VI,2,Simon Bustamante,Martes,M√≥dulo 2,TALLER VI (II) - Simon Bustamante,#FFECB3
TALLER VI,2,Diego Perry,Viernes,M√≥dulo 1,TALLER VI (II) - Diego Perry,#FFECB3
TALLER VI,2,Diego Perry,Viernes,M√≥dulo 2,TALLER VI (II) - Diego Perry,#FFECB3
TALLER VI,3,Paulina Diaz,Lunes,M√≥dulo 4,TALLER VI (III) - Paulina Diaz,#FFECB3
TALLER VI,3,Paulina Diaz,Lunes,M√≥dulo 5,TALLER VI (III) - Paulina Diaz,#FFECB3
TALLER VI,3,Juan Valdivia,Jueves,M√≥dulo 1,TALLER VI (III) - Juan Valdivia,#FFECB3
TALLER VI,3,Juan Valdivia,Jueves,M√≥dulo 2,TALLER VI (III) - Juan Valdivia,#FFECB3`;

function toggleSection(id, bloques, li, color, label) {
  const active = li.classList.contains("bg-green-100");
  let conflict = false;

  bloques.forEach(b => {
    const cell = document.querySelector(`[data-slot="${b.D√≠a}-${b.M√≥dulo}"]`);
    if (cell && !active && cell.classList.contains("selected") && cell.dataset.section !== id) {
      conflict = true;
    }
  });

  if (conflict) {
    alert("Conflicto de horario");
    return;
  }

  bloques.forEach(b => {
    const cell = document.querySelector(`[data-slot="${b.D√≠a}-${b.M√≥dulo}"]`);
    if (!cell) return;
    if (active && cell.dataset.section === id) {
      cell.classList.remove("selected");
      cell.textContent = "";
      cell.style.backgroundColor = "";
      delete cell.dataset.section;
    } else if (!active) {
      cell.classList.add("selected");
      cell.textContent = label;
      cell.style.backgroundColor = color;
      cell.dataset.section = id;
    }
  });

  li.classList.toggle("bg-green-100");
}

function buildList() {
  const lines = data.trim().split("\n");
  const grouped = {};

  lines.forEach(line => {
    const [ramo, seccion, prof, dia, modulo, label, color] = line.split(",");
    const key = ramo + "|" + seccion + "|" + prof;
    if (!grouped[key]) grouped[key] = { bloques: [], label, color, ramo };
    grouped[key].bloques.push({ D√≠a: dia, M√≥dulo: modulo });
  });

  const byRamo = {};
  for (const k in grouped) {
    const r = grouped[k].ramo;
    if (!byRamo[r]) byRamo[r] = [];
    byRamo[r].push([k, grouped[k]]);
  }

  const container = document.getElementById("courseContainer");

  Object.entries(byRamo).forEach(([ramo, secciones]) => {
    const wrapper = document.createElement("div");
    const header = document.createElement("button");
    header.textContent = "üìò " + ramo;
    header.className = "w-full text-left font-bold text-blue-700 hover:underline";
    const list = document.createElement("ul");
    list.className = "ml-4 mt-2 hidden space-y-1";

    secciones.forEach(([key, val]) => {
      const [_, seccion, __] = key.split("|");
      const li = document.createElement("li");
      li.textContent = `${seccion} | ${val.label}`;
      li.className = "cursor-pointer hover:bg-blue-100 border rounded p-2";
      li.onclick = () => toggleSection(key, val.bloques, li, val.color, val.label);
      list.appendChild(li);
    });

    header.onclick = () => list.classList.toggle("hidden");
    wrapper.appendChild(header);
    wrapper.appendChild(list);
    container.appendChild(wrapper);
  });
}

buildList();
</script>

</body>
</html>